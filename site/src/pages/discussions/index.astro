---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
const discussions = await getCollection('discussions');
const sorted = discussions.sort((a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf());
---
<Layout title="議論一覧 — Meguri" description="Meguri プロジェクトの議論ドキュメント一覧">
  <h1>議論一覧</h1>
  <ul style="list-style: none; padding: 0;">
    {sorted.map((entry) => (
      <li style="margin-bottom: 1.5rem;">
        <a href={`/discussions/${entry.slug}/`} style="font-weight: 600;">{entry.data.title}</a>
        <span style="color: #8b949e; font-size: 0.9rem;"> — {entry.data.date}</span>
        {entry.data.description && <p style="margin: 0.25rem 0 0; color: #8b949e; font-size: 0.9rem;">{entry.data.description}</p>}
      </li>
    ))}
  </ul>
</Layout>
